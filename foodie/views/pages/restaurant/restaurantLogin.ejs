<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <title>Restaurant Login</title>

    <!-- Bootstrap -->
    <link href="https://cdn.jsdelivr.net/npm/bootstrap@5.3.2/dist/css/bootstrap.min.css" rel="stylesheet">

    <!-- Bootstrap Icons -->
    <link href="https://cdn.jsdelivr.net/npm/bootstrap-icons/font/bootstrap-icons.css" rel="stylesheet">

    <!-- Common Restaurant CSS -->
    <link rel="stylesheet" href="/css/restaurantRegister.css">
</head>
<body>

<div class="container-fluid vh-100">
    <div class="row h-100 d-flex justify-content-center align-items-center" >

        <!-- Main Content -->
        <div class="col-10 main-content p-4">

            <div class="card form-card mx-auto" style="max-width: 420px;">
                <div class="card-body p-4">

                    <h4 class="mb-4 text-center">Restaurant Login</h4>

                    <form method="post" onsubmit="GetData(event)">

                        <div class="mb-3">
                            <label for="login-email" class="form-label">Email</label>
                            <input type="email" id="login-email" class="form-control" required>
                        </div>

                        <div class="mb-3">
                            <label for="login-password" class="form-label">Password</label>
                            <input type="password" id="login-password"  class="form-control" required>
                        </div>

                        <button class="btn btn-warning w-100" id="login-btn" type="submit">
                            Login
                        </button>

                        <p class="text-center mt-3 text-white">
                            Donâ€™t have an account?
                            <a href="/restaurants/register" class="text-warning text-decoration-none">
                                Register here
                            </a>
                        </p>

                    </form>

                </div>
            </div>

        </div>
    </div>
</div>

</body>
<script>
    const emailDom = document.getElementById('login-email')
    const passwordDom = document.getElementById('login-password')
    async function GetData (event){
        event.preventDefault()
       const data = {
            email : emailDom.value,
            password : passwordDom.value
        }
        const myHeaders = new Headers();
            myHeaders.append("Content-Type", "application/json");

            const raw = JSON.stringify(data);

            const requestOptions = {
                method: "POST",
                headers: myHeaders,
                body: raw,
                redirect: "follow"
            };
            try {
                const response = await fetch("http://localhost:3000/api/restaurants/login", requestOptions)
                if(response.ok){
                    window.location.href = 'http://localhost:3000/restaurants/dashboard'
                }
                else{
                    const result = await response.json()
                    alert(result)
                }
            }
            catch(err){
                console.log(err.message)
                 alert("server issue")
            }
            
        }
    

</script>
</html>
